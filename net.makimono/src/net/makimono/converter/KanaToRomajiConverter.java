package net.makimono.converter;

import java.util.Map;
import java.util.TreeMap;

import org.apache.commons.lang3.StringUtils;

public class KanaToRomajiConverter {

	private static final int MAX_LENGTH = 4;

	private static Map<String, String> hiraganaToHepburn;
	private static Map<String, String> hiraganaToKunrei;
	private static Map<String, String> katakanaToHepburn;
	private static Map<String, String> katakanaToKunrei;

	private static Map<String, String> kanaToHepburn;

	private static Map<String, String> getHiraganaToHepburnMap() {
		if (hiraganaToHepburn == null) {
			hiraganaToHepburn = new TreeMap<String, String>();
			hiraganaToHepburn.put("\u3041", "a");
			hiraganaToHepburn.put("\u3042", "a");
			hiraganaToHepburn.put("\u3043", "i");
			hiraganaToHepburn.put("\u3044", "i");
			hiraganaToHepburn.put("\u3045", "u");
			hiraganaToHepburn.put("\u3046", "u");
			hiraganaToHepburn.put("\u3046\u309b", "vu");
			hiraganaToHepburn.put("\u3046\u309b\u3041", "va");
			hiraganaToHepburn.put("\u3046\u309b\u3043", "vi");
			hiraganaToHepburn.put("\u3046\u309b\u3047", "ve");
			hiraganaToHepburn.put("\u3046\u309b\u3049", "vo");
			hiraganaToHepburn.put("\u3047", "e");
			hiraganaToHepburn.put("\u3048", "e");
			hiraganaToHepburn.put("\u3049", "o");
			hiraganaToHepburn.put("\u304a", "o");
			hiraganaToHepburn.put("\u304b", "ka");
			hiraganaToHepburn.put("\u304c", "ga");
			hiraganaToHepburn.put("\u304d", "ki");
			hiraganaToHepburn.put("\u304d\u3083", "kya");
			hiraganaToHepburn.put("\u304d\u3085", "kyu");
			hiraganaToHepburn.put("\u304d\u3087", "kyo");
			hiraganaToHepburn.put("\u304e", "gi");
			hiraganaToHepburn.put("\u304e\u3083", "gya");
			hiraganaToHepburn.put("\u304e\u3085", "gyu");
			hiraganaToHepburn.put("\u304e\u3087", "gyo");
			hiraganaToHepburn.put("\u304f", "ku");
			hiraganaToHepburn.put("\u3050", "gu");
			hiraganaToHepburn.put("\u3051", "ke");
			hiraganaToHepburn.put("\u3052", "ge");
			hiraganaToHepburn.put("\u3053", "ko");
			hiraganaToHepburn.put("\u3054", "go");
			hiraganaToHepburn.put("\u3055", "sa");
			hiraganaToHepburn.put("\u3056", "za");
			hiraganaToHepburn.put("\u3057", "shi");
			hiraganaToHepburn.put("\u3057\u3083", "sha");
			hiraganaToHepburn.put("\u3057\u3085", "shu");
			hiraganaToHepburn.put("\u3057\u3087", "sho");
			hiraganaToHepburn.put("\u3058", "ji");
			hiraganaToHepburn.put("\u3058\u3083", "ja");
			hiraganaToHepburn.put("\u3058\u3085", "ju");
			hiraganaToHepburn.put("\u3058\u3087", "jo");
			hiraganaToHepburn.put("\u3059", "su");
			hiraganaToHepburn.put("\u305a", "zu");
			hiraganaToHepburn.put("\u305b", "se");
			hiraganaToHepburn.put("\u305c", "ze");
			hiraganaToHepburn.put("\u305d", "so");
			hiraganaToHepburn.put("\u305e", "zo");
			hiraganaToHepburn.put("\u305f", "ta");
			hiraganaToHepburn.put("\u3060", "da");
			hiraganaToHepburn.put("\u3061", "chi");
			hiraganaToHepburn.put("\u3061\u3083", "cha");
			hiraganaToHepburn.put("\u3061\u3085", "chu");
			hiraganaToHepburn.put("\u3061\u3087", "cho");
			hiraganaToHepburn.put("\u3062", "di");
			hiraganaToHepburn.put("\u3062\u3083", "dya");
			hiraganaToHepburn.put("\u3062\u3085", "dyu");
			hiraganaToHepburn.put("\u3062\u3087", "dyo");
			hiraganaToHepburn.put("\u3063", "tsu");
			hiraganaToHepburn.put("\u3063\u3046\u309b", "vvu");
			hiraganaToHepburn.put("\u3063\u3046\u309b\u3041", "vva");
			hiraganaToHepburn.put("\u3063\u3046\u309b\u3043", "vvi");
			hiraganaToHepburn.put("\u3063\u3046\u309b\u3047", "vve");
			hiraganaToHepburn.put("\u3063\u3046\u309b\u3049", "vvo");
			hiraganaToHepburn.put("\u3063\u304b", "kka");
			hiraganaToHepburn.put("\u3063\u304c", "gga");
			hiraganaToHepburn.put("\u3063\u304d", "kki");
			hiraganaToHepburn.put("\u3063\u304d\u3083", "kkya");
			hiraganaToHepburn.put("\u3063\u304d\u3085", "kkyu");
			hiraganaToHepburn.put("\u3063\u304d\u3087", "kkyo");
			hiraganaToHepburn.put("\u3063\u304e", "ggi");
			hiraganaToHepburn.put("\u3063\u304e\u3083", "ggya");
			hiraganaToHepburn.put("\u3063\u304e\u3085", "ggyu");
			hiraganaToHepburn.put("\u3063\u304e\u3087", "ggyo");
			hiraganaToHepburn.put("\u3063\u304f", "kku");
			hiraganaToHepburn.put("\u3063\u3050", "ggu");
			hiraganaToHepburn.put("\u3063\u3051", "kke");
			hiraganaToHepburn.put("\u3063\u3052", "gge");
			hiraganaToHepburn.put("\u3063\u3053", "kko");
			hiraganaToHepburn.put("\u3063\u3054", "ggo");
			hiraganaToHepburn.put("\u3063\u3055", "ssa");
			hiraganaToHepburn.put("\u3063\u3056", "zza");
			hiraganaToHepburn.put("\u3063\u3057", "sshi");
			hiraganaToHepburn.put("\u3063\u3057\u3083", "ssha");
			hiraganaToHepburn.put("\u3063\u3057\u3085", "sshu");
			hiraganaToHepburn.put("\u3063\u3057\u3087", "ssho");
			hiraganaToHepburn.put("\u3063\u3058", "jji");
			hiraganaToHepburn.put("\u3063\u3058\u3083", "jja");
			hiraganaToHepburn.put("\u3063\u3058\u3085", "jju");
			hiraganaToHepburn.put("\u3063\u3058\u3087", "jjo");
			hiraganaToHepburn.put("\u3063\u3059", "ssu");
			hiraganaToHepburn.put("\u3063\u305a", "zzu");
			hiraganaToHepburn.put("\u3063\u305b", "sse");
			hiraganaToHepburn.put("\u3063\u305c", "zze");
			hiraganaToHepburn.put("\u3063\u305d", "sso");
			hiraganaToHepburn.put("\u3063\u305e", "zzo");
			hiraganaToHepburn.put("\u3063\u305f", "tta");
			hiraganaToHepburn.put("\u3063\u3060", "dda");
			hiraganaToHepburn.put("\u3063\u3061", "cchi");
			hiraganaToHepburn.put("\u3063\u3061\u3083", "ccha");
			hiraganaToHepburn.put("\u3063\u3061\u3085", "cchu");
			hiraganaToHepburn.put("\u3063\u3061\u3087", "ccho");
			hiraganaToHepburn.put("\u3063\u3062", "ddi");
			hiraganaToHepburn.put("\u3063\u3062\u3083", "ddya");
			hiraganaToHepburn.put("\u3063\u3062\u3085", "ddyu");
			hiraganaToHepburn.put("\u3063\u3062\u3087", "ddyo");
			hiraganaToHepburn.put("\u3063\u3064", "ttsu");
			hiraganaToHepburn.put("\u3063\u3065", "ddu");
			hiraganaToHepburn.put("\u3063\u3066", "tte");
			hiraganaToHepburn.put("\u3063\u3067", "dde");
			hiraganaToHepburn.put("\u3063\u3068", "tto");
			hiraganaToHepburn.put("\u3063\u3069", "ddo");
			hiraganaToHepburn.put("\u3063\u306f", "hha");
			hiraganaToHepburn.put("\u3063\u3070", "bba");
			hiraganaToHepburn.put("\u3063\u3071", "ppa");
			hiraganaToHepburn.put("\u3063\u3072", "hhi");
			hiraganaToHepburn.put("\u3063\u3072\u3083", "hhya");
			hiraganaToHepburn.put("\u3063\u3072\u3085", "hhyu");
			hiraganaToHepburn.put("\u3063\u3072\u3087", "hhyo");
			hiraganaToHepburn.put("\u3063\u3073", "bbi");
			hiraganaToHepburn.put("\u3063\u3073\u3083", "bbya");
			hiraganaToHepburn.put("\u3063\u3073\u3085", "bbyu");
			hiraganaToHepburn.put("\u3063\u3073\u3087", "bbyo");
			hiraganaToHepburn.put("\u3063\u3074", "ppi");
			hiraganaToHepburn.put("\u3063\u3074\u3083", "ppya");
			hiraganaToHepburn.put("\u3063\u3074\u3085", "ppyu");
			hiraganaToHepburn.put("\u3063\u3074\u3087", "ppyo");
			hiraganaToHepburn.put("\u3063\u3075", "ffu");
			hiraganaToHepburn.put("\u3063\u3075\u3041", "ffa");
			hiraganaToHepburn.put("\u3063\u3075\u3043", "ffi");
			hiraganaToHepburn.put("\u3063\u3075\u3047", "ffe");
			hiraganaToHepburn.put("\u3063\u3075\u3049", "ffo");
			hiraganaToHepburn.put("\u3063\u3076", "bbu");
			hiraganaToHepburn.put("\u3063\u3077", "ppu");
			hiraganaToHepburn.put("\u3063\u3078", "hhe");
			hiraganaToHepburn.put("\u3063\u3079", "bbe");
			hiraganaToHepburn.put("\u3063\u307a", "ppe");
			hiraganaToHepburn.put("\u3063\u307b", "hho");
			hiraganaToHepburn.put("\u3063\u307c", "bbo");
			hiraganaToHepburn.put("\u3063\u307d", "ppo");
			hiraganaToHepburn.put("\u3063\u3084", "yya");
			hiraganaToHepburn.put("\u3063\u3086", "yyu");
			hiraganaToHepburn.put("\u3063\u3088", "yyo");
			hiraganaToHepburn.put("\u3063\u3089", "rra");
			hiraganaToHepburn.put("\u3063\u308a", "rri");
			hiraganaToHepburn.put("\u3063\u308a\u3083", "rrya");
			hiraganaToHepburn.put("\u3063\u308a\u3085", "rryu");
			hiraganaToHepburn.put("\u3063\u308a\u3087", "rryo");
			hiraganaToHepburn.put("\u3063\u308b", "rru");
			hiraganaToHepburn.put("\u3063\u308c", "rre");
			hiraganaToHepburn.put("\u3063\u308d", "rro");
			hiraganaToHepburn.put("\u3064", "tsu");
			hiraganaToHepburn.put("\u3065", "du");
			hiraganaToHepburn.put("\u3066", "te");
			hiraganaToHepburn.put("\u3067", "de");
			hiraganaToHepburn.put("\u3068", "to");
			hiraganaToHepburn.put("\u3069", "do");
			hiraganaToHepburn.put("\u306a", "na");
			hiraganaToHepburn.put("\u306b", "ni");
			hiraganaToHepburn.put("\u306b\u3083", "nya");
			hiraganaToHepburn.put("\u306b\u3085", "nyu");
			hiraganaToHepburn.put("\u306b\u3087", "nyo");
			hiraganaToHepburn.put("\u306c", "nu");
			hiraganaToHepburn.put("\u306d", "ne");
			hiraganaToHepburn.put("\u306e", "no");
			hiraganaToHepburn.put("\u306f", "ha");
			hiraganaToHepburn.put("\u3070", "ba");
			hiraganaToHepburn.put("\u3071", "pa");
			hiraganaToHepburn.put("\u3072", "hi");
			hiraganaToHepburn.put("\u3072\u3083", "hya");
			hiraganaToHepburn.put("\u3072\u3085", "hyu");
			hiraganaToHepburn.put("\u3072\u3087", "hyo");
			hiraganaToHepburn.put("\u3073", "bi");
			hiraganaToHepburn.put("\u3073\u3083", "bya");
			hiraganaToHepburn.put("\u3073\u3085", "byu");
			hiraganaToHepburn.put("\u3073\u3087", "byo");
			hiraganaToHepburn.put("\u3074", "pi");
			hiraganaToHepburn.put("\u3074\u3083", "pya");
			hiraganaToHepburn.put("\u3074\u3085", "pyu");
			hiraganaToHepburn.put("\u3074\u3087", "pyo");
			hiraganaToHepburn.put("\u3075", "fu");
			hiraganaToHepburn.put("\u3075\u3041", "fa");
			hiraganaToHepburn.put("\u3075\u3043", "fi");
			hiraganaToHepburn.put("\u3075\u3047", "fe");
			hiraganaToHepburn.put("\u3075\u3049", "fo");
			hiraganaToHepburn.put("\u3076", "bu");
			hiraganaToHepburn.put("\u3077", "pu");
			hiraganaToHepburn.put("\u3078", "he");
			hiraganaToHepburn.put("\u3079", "be");
			hiraganaToHepburn.put("\u307a", "pe");
			hiraganaToHepburn.put("\u307b", "ho");
			hiraganaToHepburn.put("\u307c", "bo");
			hiraganaToHepburn.put("\u307d", "po");
			hiraganaToHepburn.put("\u307e", "ma");
			hiraganaToHepburn.put("\u307f", "mi");
			hiraganaToHepburn.put("\u307f\u3083", "mya");
			hiraganaToHepburn.put("\u307f\u3085", "myu");
			hiraganaToHepburn.put("\u307f\u3087", "myo");
			hiraganaToHepburn.put("\u3080", "mu");
			hiraganaToHepburn.put("\u3081", "me");
			hiraganaToHepburn.put("\u3082", "mo");
			hiraganaToHepburn.put("\u3083", "ya");
			hiraganaToHepburn.put("\u3084", "ya");
			hiraganaToHepburn.put("\u3085", "yu");
			hiraganaToHepburn.put("\u3086", "yu");
			hiraganaToHepburn.put("\u3087", "yo");
			hiraganaToHepburn.put("\u3088", "yo");
			hiraganaToHepburn.put("\u3089", "ra");
			hiraganaToHepburn.put("\u308a", "ri");
			hiraganaToHepburn.put("\u308a\u3083", "rya");
			hiraganaToHepburn.put("\u308a\u3085", "ryu");
			hiraganaToHepburn.put("\u308a\u3087", "ryo");
			hiraganaToHepburn.put("\u308b", "ru");
			hiraganaToHepburn.put("\u308c", "re");
			hiraganaToHepburn.put("\u308d", "ro");
			hiraganaToHepburn.put("\u308e", "wa");
			hiraganaToHepburn.put("\u308f", "wa");
			hiraganaToHepburn.put("\u3090", "i");
			hiraganaToHepburn.put("\u3091", "e");
			hiraganaToHepburn.put("\u3092", "wo");
			hiraganaToHepburn.put("\u3093", "n");
			hiraganaToHepburn.put("\u3093\u3042", "n'a");
			hiraganaToHepburn.put("\u3093\u3044", "n'i");
			hiraganaToHepburn.put("\u3093\u3046", "n'u");
			hiraganaToHepburn.put("\u3093\u3048", "n'e");
			hiraganaToHepburn.put("\u3093\u304a", "n'o");
		}
		return hiraganaToHepburn;
	}

	private static Map<String, String> getHiraganaToKunreiMap() {
		if (hiraganaToKunrei == null) {
			hiraganaToKunrei = new TreeMap<String, String>();
			hiraganaToKunrei.put("\u3041", "a");
			hiraganaToKunrei.put("\u3042", "a");
			hiraganaToKunrei.put("\u3043", "i");
			hiraganaToKunrei.put("\u3044", "i");
			hiraganaToKunrei.put("\u3045", "u");
			hiraganaToKunrei.put("\u3046", "u");
			hiraganaToKunrei.put("\u3046\u309b", "vu");
			hiraganaToKunrei.put("\u3046\u309b\u3041", "va");
			hiraganaToKunrei.put("\u3046\u309b\u3043", "vi");
			hiraganaToKunrei.put("\u3046\u309b\u3047", "ve");
			hiraganaToKunrei.put("\u3046\u309b\u3049", "vo");
			hiraganaToKunrei.put("\u3047", "e");
			hiraganaToKunrei.put("\u3048", "e");
			hiraganaToKunrei.put("\u3049", "o");
			hiraganaToKunrei.put("\u304a", "o");
			hiraganaToKunrei.put("\u304b", "ka");
			hiraganaToKunrei.put("\u304c", "ga");
			hiraganaToKunrei.put("\u304d", "ki");
			hiraganaToKunrei.put("\u304d\u3083", "kya");
			hiraganaToKunrei.put("\u304d\u3085", "kyu");
			hiraganaToKunrei.put("\u304d\u3087", "kyo");
			hiraganaToKunrei.put("\u304e", "gi");
			hiraganaToKunrei.put("\u304e\u3083", "gya");
			hiraganaToKunrei.put("\u304e\u3085", "gyu");
			hiraganaToKunrei.put("\u304e\u3087", "gyo");
			hiraganaToKunrei.put("\u304f", "ku");
			hiraganaToKunrei.put("\u3050", "gu");
			hiraganaToKunrei.put("\u3051", "ke");
			hiraganaToKunrei.put("\u3052", "ge");
			hiraganaToKunrei.put("\u3053", "ko");
			hiraganaToKunrei.put("\u3054", "go");
			hiraganaToKunrei.put("\u3055", "sa");
			hiraganaToKunrei.put("\u3056", "za");
			hiraganaToKunrei.put("\u3057", "si");
			hiraganaToKunrei.put("\u3057\u3083", "sya");
			hiraganaToKunrei.put("\u3057\u3085", "syu");
			hiraganaToKunrei.put("\u3057\u3087", "syo");
			hiraganaToKunrei.put("\u3058", "zi");
			hiraganaToKunrei.put("\u3058\u3083", "zya");
			hiraganaToKunrei.put("\u3058\u3085", "zyu");
			hiraganaToKunrei.put("\u3058\u3087", "zyo");
			hiraganaToKunrei.put("\u3059", "su");
			hiraganaToKunrei.put("\u305a", "zu");
			hiraganaToKunrei.put("\u305b", "se");
			hiraganaToKunrei.put("\u305c", "ze");
			hiraganaToKunrei.put("\u305d", "so");
			hiraganaToKunrei.put("\u305e", "zo");
			hiraganaToKunrei.put("\u305f", "ta");
			hiraganaToKunrei.put("\u3060", "da");
			hiraganaToKunrei.put("\u3061", "ti");
			hiraganaToKunrei.put("\u3061\u3083", "tya");
			hiraganaToKunrei.put("\u3061\u3085", "tyu");
			hiraganaToKunrei.put("\u3061\u3087", "tyo");
			hiraganaToKunrei.put("\u3062", "di");
			hiraganaToKunrei.put("\u3062\u3083", "dya");
			hiraganaToKunrei.put("\u3062\u3085", "dyu");
			hiraganaToKunrei.put("\u3062\u3087", "dyo");
			hiraganaToKunrei.put("\u3063", "tu");
			hiraganaToKunrei.put("\u3063\u3046\u309b", "vvu");
			hiraganaToKunrei.put("\u3063\u3046\u309b\u3041", "vva");
			hiraganaToKunrei.put("\u3063\u3046\u309b\u3043", "vvi");
			hiraganaToKunrei.put("\u3063\u3046\u309b\u3047", "vve");
			hiraganaToKunrei.put("\u3063\u3046\u309b\u3049", "vvo");
			hiraganaToKunrei.put("\u3063\u304b", "kka");
			hiraganaToKunrei.put("\u3063\u304c", "gga");
			hiraganaToKunrei.put("\u3063\u304d", "kki");
			hiraganaToKunrei.put("\u3063\u304d\u3083", "kkya");
			hiraganaToKunrei.put("\u3063\u304d\u3085", "kkyu");
			hiraganaToKunrei.put("\u3063\u304d\u3087", "kkyo");
			hiraganaToKunrei.put("\u3063\u304e", "ggi");
			hiraganaToKunrei.put("\u3063\u304e\u3083", "ggya");
			hiraganaToKunrei.put("\u3063\u304e\u3085", "ggyu");
			hiraganaToKunrei.put("\u3063\u304e\u3087", "ggyo");
			hiraganaToKunrei.put("\u3063\u304f", "kku");
			hiraganaToKunrei.put("\u3063\u3050", "ggu");
			hiraganaToKunrei.put("\u3063\u3051", "kke");
			hiraganaToKunrei.put("\u3063\u3052", "gge");
			hiraganaToKunrei.put("\u3063\u3053", "kko");
			hiraganaToKunrei.put("\u3063\u3054", "ggo");
			hiraganaToKunrei.put("\u3063\u3055", "ssa");
			hiraganaToKunrei.put("\u3063\u3056", "zza");
			hiraganaToKunrei.put("\u3063\u3057", "ssi");
			hiraganaToKunrei.put("\u3063\u3057\u3083", "ssya");
			hiraganaToKunrei.put("\u3063\u3057\u3085", "ssyu");
			hiraganaToKunrei.put("\u3063\u3057\u3087", "ssho");
			hiraganaToKunrei.put("\u3063\u3058", "zzi");
			hiraganaToKunrei.put("\u3063\u3058\u3083", "zzya");
			hiraganaToKunrei.put("\u3063\u3058\u3085", "zzyu");
			hiraganaToKunrei.put("\u3063\u3058\u3087", "zzyo");
			hiraganaToKunrei.put("\u3063\u3059", "ssu");
			hiraganaToKunrei.put("\u3063\u305a", "zzu");
			hiraganaToKunrei.put("\u3063\u305b", "sse");
			hiraganaToKunrei.put("\u3063\u305c", "zze");
			hiraganaToKunrei.put("\u3063\u305d", "sso");
			hiraganaToKunrei.put("\u3063\u305e", "zzo");
			hiraganaToKunrei.put("\u3063\u305f", "tta");
			hiraganaToKunrei.put("\u3063\u3060", "dda");
			hiraganaToKunrei.put("\u3063\u3061", "tti");
			hiraganaToKunrei.put("\u3063\u3061\u3083", "ttya");
			hiraganaToKunrei.put("\u3063\u3061\u3085", "ttyu");
			hiraganaToKunrei.put("\u3063\u3061\u3087", "ttyo");
			hiraganaToKunrei.put("\u3063\u3062", "ddi");
			hiraganaToKunrei.put("\u3063\u3062\u3083", "ddya");
			hiraganaToKunrei.put("\u3063\u3062\u3085", "ddyu");
			hiraganaToKunrei.put("\u3063\u3062\u3087", "ddyo");
			hiraganaToKunrei.put("\u3063\u3064", "ttu");
			hiraganaToKunrei.put("\u3063\u3065", "ddu");
			hiraganaToKunrei.put("\u3063\u3066", "tte");
			hiraganaToKunrei.put("\u3063\u3067", "dde");
			hiraganaToKunrei.put("\u3063\u3068", "tto");
			hiraganaToKunrei.put("\u3063\u3069", "ddo");
			hiraganaToKunrei.put("\u3063\u306f", "hha");
			hiraganaToKunrei.put("\u3063\u3070", "bba");
			hiraganaToKunrei.put("\u3063\u3071", "ppa");
			hiraganaToKunrei.put("\u3063\u3072", "hhi");
			hiraganaToKunrei.put("\u3063\u3072\u3083", "hhya");
			hiraganaToKunrei.put("\u3063\u3072\u3085", "hhyu");
			hiraganaToKunrei.put("\u3063\u3072\u3087", "hhyo");
			hiraganaToKunrei.put("\u3063\u3073", "bbi");
			hiraganaToKunrei.put("\u3063\u3073\u3083", "bbya");
			hiraganaToKunrei.put("\u3063\u3073\u3085", "bbyu");
			hiraganaToKunrei.put("\u3063\u3073\u3087", "bbyo");
			hiraganaToKunrei.put("\u3063\u3074", "ppi");
			hiraganaToKunrei.put("\u3063\u3074\u3083", "ppya");
			hiraganaToKunrei.put("\u3063\u3074\u3085", "ppyu");
			hiraganaToKunrei.put("\u3063\u3074\u3087", "ppyo");
			hiraganaToKunrei.put("\u3063\u3075", "hhu");
			hiraganaToKunrei.put("\u3063\u3075\u3041", "ffa");
			hiraganaToKunrei.put("\u3063\u3075\u3043", "ffi");
			hiraganaToKunrei.put("\u3063\u3075\u3047", "ffe");
			hiraganaToKunrei.put("\u3063\u3075\u3049", "ffo");
			hiraganaToKunrei.put("\u3063\u3076", "bbu");
			hiraganaToKunrei.put("\u3063\u3077", "ppu");
			hiraganaToKunrei.put("\u3063\u3078", "hhe");
			hiraganaToKunrei.put("\u3063\u3079", "bbe");
			hiraganaToKunrei.put("\u3063\u307a", "ppe");
			hiraganaToKunrei.put("\u3063\u307b", "hho");
			hiraganaToKunrei.put("\u3063\u307c", "bbo");
			hiraganaToKunrei.put("\u3063\u307d", "ppo");
			hiraganaToKunrei.put("\u3063\u3084", "yya");
			hiraganaToKunrei.put("\u3063\u3086", "yyu");
			hiraganaToKunrei.put("\u3063\u3088", "yyo");
			hiraganaToKunrei.put("\u3063\u3089", "rra");
			hiraganaToKunrei.put("\u3063\u308a", "rri");
			hiraganaToKunrei.put("\u3063\u308a\u3083", "rrya");
			hiraganaToKunrei.put("\u3063\u308a\u3085", "rryu");
			hiraganaToKunrei.put("\u3063\u308a\u3087", "rryo");
			hiraganaToKunrei.put("\u3063\u308b", "rru");
			hiraganaToKunrei.put("\u3063\u308c", "rre");
			hiraganaToKunrei.put("\u3063\u308d", "rro");
			hiraganaToKunrei.put("\u3064", "tu");
			hiraganaToKunrei.put("\u3065", "du");
			hiraganaToKunrei.put("\u3066", "te");
			hiraganaToKunrei.put("\u3067", "de");
			hiraganaToKunrei.put("\u3068", "to");
			hiraganaToKunrei.put("\u3069", "do");
			hiraganaToKunrei.put("\u306a", "na");
			hiraganaToKunrei.put("\u306b", "ni");
			hiraganaToKunrei.put("\u306b\u3083", "nya");
			hiraganaToKunrei.put("\u306b\u3085", "nyu");
			hiraganaToKunrei.put("\u306b\u3087", "nyo");
			hiraganaToKunrei.put("\u306c", "nu");
			hiraganaToKunrei.put("\u306d", "ne");
			hiraganaToKunrei.put("\u306e", "no");
			hiraganaToKunrei.put("\u306f", "ha");
			hiraganaToKunrei.put("\u3070", "ba");
			hiraganaToKunrei.put("\u3071", "pa");
			hiraganaToKunrei.put("\u3072", "hi");
			hiraganaToKunrei.put("\u3072\u3083", "hya");
			hiraganaToKunrei.put("\u3072\u3085", "hyu");
			hiraganaToKunrei.put("\u3072\u3087", "hyo");
			hiraganaToKunrei.put("\u3073", "bi");
			hiraganaToKunrei.put("\u3073\u3083", "bya");
			hiraganaToKunrei.put("\u3073\u3085", "byu");
			hiraganaToKunrei.put("\u3073\u3087", "byo");
			hiraganaToKunrei.put("\u3074", "pi");
			hiraganaToKunrei.put("\u3074\u3083", "pya");
			hiraganaToKunrei.put("\u3074\u3085", "pyu");
			hiraganaToKunrei.put("\u3074\u3087", "pyo");
			hiraganaToKunrei.put("\u3075", "hu");
			hiraganaToKunrei.put("\u3075\u3041", "fa");
			hiraganaToKunrei.put("\u3075\u3043", "fi");
			hiraganaToKunrei.put("\u3075\u3047", "fe");
			hiraganaToKunrei.put("\u3075\u3049", "fo");
			hiraganaToKunrei.put("\u3076", "bu");
			hiraganaToKunrei.put("\u3077", "pu");
			hiraganaToKunrei.put("\u3078", "he");
			hiraganaToKunrei.put("\u3079", "be");
			hiraganaToKunrei.put("\u307a", "pe");
			hiraganaToKunrei.put("\u307b", "ho");
			hiraganaToKunrei.put("\u307c", "bo");
			hiraganaToKunrei.put("\u307d", "po");
			hiraganaToKunrei.put("\u307e", "ma");
			hiraganaToKunrei.put("\u307f", "mi");
			hiraganaToKunrei.put("\u307f\u3083", "mya");
			hiraganaToKunrei.put("\u307f\u3085", "myu");
			hiraganaToKunrei.put("\u307f\u3087", "myo");
			hiraganaToKunrei.put("\u3080", "mu");
			hiraganaToKunrei.put("\u3081", "me");
			hiraganaToKunrei.put("\u3082", "mo");
			hiraganaToKunrei.put("\u3083", "ya");
			hiraganaToKunrei.put("\u3084", "ya");
			hiraganaToKunrei.put("\u3085", "yu");
			hiraganaToKunrei.put("\u3086", "yu");
			hiraganaToKunrei.put("\u3087", "yo");
			hiraganaToKunrei.put("\u3088", "yo");
			hiraganaToKunrei.put("\u3089", "ra");
			hiraganaToKunrei.put("\u308a", "ri");
			hiraganaToKunrei.put("\u308a\u3083", "rya");
			hiraganaToKunrei.put("\u308a\u3085", "ryu");
			hiraganaToKunrei.put("\u308a\u3087", "ryo");
			hiraganaToKunrei.put("\u308b", "ru");
			hiraganaToKunrei.put("\u308c", "re");
			hiraganaToKunrei.put("\u308d", "ro");
			hiraganaToKunrei.put("\u308e", "wa");
			hiraganaToKunrei.put("\u308f", "wa");
			hiraganaToKunrei.put("\u3090", "i");
			hiraganaToKunrei.put("\u3091", "e");
			hiraganaToKunrei.put("\u3092", "wo");
			hiraganaToKunrei.put("\u3093", "n");
			hiraganaToKunrei.put("\u3093\u3042", "n'a");
			hiraganaToKunrei.put("\u3093\u3044", "n'i");
			hiraganaToKunrei.put("\u3093\u3046", "n'u");
			hiraganaToKunrei.put("\u3093\u3048", "n'e");
			hiraganaToKunrei.put("\u3093\u304a", "n'o");
		}
		return hiraganaToKunrei;
	}

	private static Map<String, String> getKatakanaToHepburnMap() {
		if (katakanaToHepburn == null) {
			katakanaToHepburn = new TreeMap<String, String>();
			katakanaToHepburn.put("\u30a1", "a");
			katakanaToHepburn.put("\u30a2", "a");
			katakanaToHepburn.put("\u30a3", "i");
			katakanaToHepburn.put("\u30a4", "i");
			katakanaToHepburn.put("\u30a5", "u");
			katakanaToHepburn.put("\u30a6", "u");
			katakanaToHepburn.put("\u30a7", "e");
			katakanaToHepburn.put("\u30a8", "e");
			katakanaToHepburn.put("\u30a9", "o");
			katakanaToHepburn.put("\u30aa", "o");
			katakanaToHepburn.put("\u30ab", "ka");
			katakanaToHepburn.put("\u30ac", "ga");
			katakanaToHepburn.put("\u30ad", "ki");
			katakanaToHepburn.put("\u30ad\u30e3", "kya");
			katakanaToHepburn.put("\u30ad\u30e5", "kyu");
			katakanaToHepburn.put("\u30ad\u30e7", "kyo");
			katakanaToHepburn.put("\u30ae", "gi");
			katakanaToHepburn.put("\u30ae\u30e3", "gya");
			katakanaToHepburn.put("\u30ae\u30e5", "gyu");
			katakanaToHepburn.put("\u30ae\u30e7", "gyo");
			katakanaToHepburn.put("\u30af", "ku");
			katakanaToHepburn.put("\u30b0", "gu");
			katakanaToHepburn.put("\u30b1", "ke");
			katakanaToHepburn.put("\u30b2", "ge");
			katakanaToHepburn.put("\u30b3", "ko");
			katakanaToHepburn.put("\u30b4", "go");
			katakanaToHepburn.put("\u30b5", "sa");
			katakanaToHepburn.put("\u30b6", "za");
			katakanaToHepburn.put("\u30b7", "shi");
			katakanaToHepburn.put("\u30b7\u30e3", "sha");
			katakanaToHepburn.put("\u30b7\u30e5", "shu");
			katakanaToHepburn.put("\u30b7\u30e7", "sho");
			katakanaToHepburn.put("\u30b8", "ji");
			katakanaToHepburn.put("\u30b8\u30e3", "ja");
			katakanaToHepburn.put("\u30b8\u30e5", "ju");
			katakanaToHepburn.put("\u30b8\u30e7", "jo");
			katakanaToHepburn.put("\u30b9", "su");
			katakanaToHepburn.put("\u30ba", "zu");
			katakanaToHepburn.put("\u30bb", "se");
			katakanaToHepburn.put("\u30bc", "ze");
			katakanaToHepburn.put("\u30bd", "so");
			katakanaToHepburn.put("\u30be", "zo");
			katakanaToHepburn.put("\u30bf", "ta");
			katakanaToHepburn.put("\u30c0", "da");
			katakanaToHepburn.put("\u30c1", "chi");
			katakanaToHepburn.put("\u30c1\u30e3", "cha");
			katakanaToHepburn.put("\u30c1\u30e5", "chu");
			katakanaToHepburn.put("\u30c1\u30e7", "cho");
			katakanaToHepburn.put("\u30c2", "di");
			katakanaToHepburn.put("\u30c2\u30e3", "dya");
			katakanaToHepburn.put("\u30c2\u30e5", "dyu");
			katakanaToHepburn.put("\u30c2\u30e7", "dyo");
			katakanaToHepburn.put("\u30c3", "tsu");
			katakanaToHepburn.put("\u30c3\u30ab", "kka");
			katakanaToHepburn.put("\u30c3\u30ac", "gga");
			katakanaToHepburn.put("\u30c3\u30ad", "kki");
			katakanaToHepburn.put("\u30c3\u30ad\u30e3", "kkya");
			katakanaToHepburn.put("\u30c3\u30ad\u30e5", "kkyu");
			katakanaToHepburn.put("\u30c3\u30ad\u30e7", "kkyo");
			katakanaToHepburn.put("\u30c3\u30ae", "ggi");
			katakanaToHepburn.put("\u30c3\u30ae\u30e3", "ggya");
			katakanaToHepburn.put("\u30c3\u30ae\u30e5", "ggyu");
			katakanaToHepburn.put("\u30c3\u30ae\u30e7", "ggyo");
			katakanaToHepburn.put("\u30c3\u30af", "kku");
			katakanaToHepburn.put("\u30c3\u30b0", "ggu");
			katakanaToHepburn.put("\u30c3\u30b1", "kke");
			katakanaToHepburn.put("\u30c3\u30b2", "gge");
			katakanaToHepburn.put("\u30c3\u30b3", "kko");
			katakanaToHepburn.put("\u30c3\u30b4", "ggo");
			katakanaToHepburn.put("\u30c3\u30b5", "ssa");
			katakanaToHepburn.put("\u30c3\u30b6", "zza");
			katakanaToHepburn.put("\u30c3\u30b7", "sshi");
			katakanaToHepburn.put("\u30c3\u30b7\u30e3", "ssha");
			katakanaToHepburn.put("\u30c3\u30b7\u30e5", "sshu");
			katakanaToHepburn.put("\u30c3\u30b7\u30e7", "ssho");
			katakanaToHepburn.put("\u30c3\u30b8", "jji");
			katakanaToHepburn.put("\u30c3\u30b8\u30e3", "jja");
			katakanaToHepburn.put("\u30c3\u30b8\u30e5", "jju");
			katakanaToHepburn.put("\u30c3\u30b8\u30e7", "jjo");
			katakanaToHepburn.put("\u30c3\u30b9", "ssu");
			katakanaToHepburn.put("\u30c3\u30ba", "zzu");
			katakanaToHepburn.put("\u30c3\u30bb", "sse");
			katakanaToHepburn.put("\u30c3\u30bc", "zze");
			katakanaToHepburn.put("\u30c3\u30bd", "sso");
			katakanaToHepburn.put("\u30c3\u30be", "zzo");
			katakanaToHepburn.put("\u30c3\u30bf", "tta");
			katakanaToHepburn.put("\u30c3\u30c0", "dda");
			katakanaToHepburn.put("\u30c3\u30c1", "cchi");
			katakanaToHepburn.put("\u30c3\u30c1\u30e3", "ccha");
			katakanaToHepburn.put("\u30c3\u30c1\u30e5", "cchu");
			katakanaToHepburn.put("\u30c3\u30c1\u30e7", "ccho");
			katakanaToHepburn.put("\u30c3\u30c2", "ddi");
			katakanaToHepburn.put("\u30c3\u30c2\u30e3", "ddya");
			katakanaToHepburn.put("\u30c3\u30c2\u30e5", "ddyu");
			katakanaToHepburn.put("\u30c3\u30c2\u30e7", "ddyo");
			katakanaToHepburn.put("\u30c3\u30c4", "ttsu");
			katakanaToHepburn.put("\u30c3\u30c5", "ddu");
			katakanaToHepburn.put("\u30c3\u30c6", "tte");
			katakanaToHepburn.put("\u30c3\u30c7", "dde");
			katakanaToHepburn.put("\u30c3\u30c8", "tto");
			katakanaToHepburn.put("\u30c3\u30c9", "ddo");
			katakanaToHepburn.put("\u30c3\u30cf", "hha");
			katakanaToHepburn.put("\u30c3\u30d0", "bba");
			katakanaToHepburn.put("\u30c3\u30d1", "ppa");
			katakanaToHepburn.put("\u30c3\u30d2", "hhi");
			katakanaToHepburn.put("\u30c3\u30d2\u30e3", "hhya");
			katakanaToHepburn.put("\u30c3\u30d2\u30e5", "hhyu");
			katakanaToHepburn.put("\u30c3\u30d2\u30e7", "hhyo");
			katakanaToHepburn.put("\u30c3\u30d3", "bbi");
			katakanaToHepburn.put("\u30c3\u30d3\u30e3", "bbya");
			katakanaToHepburn.put("\u30c3\u30d3\u30e5", "bbyu");
			katakanaToHepburn.put("\u30c3\u30d3\u30e7", "bbyo");
			katakanaToHepburn.put("\u30c3\u30d4", "ppi");
			katakanaToHepburn.put("\u30c3\u30d4\u30e3", "ppya");
			katakanaToHepburn.put("\u30c3\u30d4\u30e5", "ppyu");
			katakanaToHepburn.put("\u30c3\u30d4\u30e7", "ppyo");
			katakanaToHepburn.put("\u30c3\u30d5", "ffu");
			katakanaToHepburn.put("\u30c3\u30d5\u30a1", "ffa");
			katakanaToHepburn.put("\u30c3\u30d5\u30a3", "ffi");
			katakanaToHepburn.put("\u30c3\u30d5\u30a7", "ffe");
			katakanaToHepburn.put("\u30c3\u30d5\u30a9", "ffo");
			katakanaToHepburn.put("\u30c3\u30d6", "bbu");
			katakanaToHepburn.put("\u30c3\u30d7", "ppu");
			katakanaToHepburn.put("\u30c3\u30d8", "hhe");
			katakanaToHepburn.put("\u30c3\u30d9", "bbe");
			katakanaToHepburn.put("\u30c3\u30da", "ppe");
			katakanaToHepburn.put("\u30c3\u30db", "hho");
			katakanaToHepburn.put("\u30c3\u30dc", "bbo");
			katakanaToHepburn.put("\u30c3\u30dd", "ppo");
			katakanaToHepburn.put("\u30c3\u30e4", "yya");
			katakanaToHepburn.put("\u30c3\u30e6", "yyu");
			katakanaToHepburn.put("\u30c3\u30e8", "yyo");
			katakanaToHepburn.put("\u30c3\u30e9", "rra");
			katakanaToHepburn.put("\u30c3\u30ea", "rri");
			katakanaToHepburn.put("\u30c3\u30ea\u30e3", "rrya");
			katakanaToHepburn.put("\u30c3\u30ea\u30e5", "rryu");
			katakanaToHepburn.put("\u30c3\u30ea\u30e7", "rryo");
			katakanaToHepburn.put("\u30c3\u30eb", "rru");
			katakanaToHepburn.put("\u30c3\u30ec", "rre");
			katakanaToHepburn.put("\u30c3\u30ed", "rro");
			katakanaToHepburn.put("\u30c3\u30f4", "vvu");
			katakanaToHepburn.put("\u30c3\u30f4\u30a1", "vva");
			katakanaToHepburn.put("\u30c3\u30f4\u30a3", "vvi");
			katakanaToHepburn.put("\u30c3\u30f4\u30a7", "vve");
			katakanaToHepburn.put("\u30c3\u30f4\u30a9", "vvo");
			katakanaToHepburn.put("\u30c4", "tsu");
			katakanaToHepburn.put("\u30c5", "du");
			katakanaToHepburn.put("\u30c6", "te");
			katakanaToHepburn.put("\u30c7", "de");
			katakanaToHepburn.put("\u30c8", "to");
			katakanaToHepburn.put("\u30c9", "do");
			katakanaToHepburn.put("\u30ca", "na");
			katakanaToHepburn.put("\u30cb", "ni");
			katakanaToHepburn.put("\u30cb\u30e3", "nya");
			katakanaToHepburn.put("\u30cb\u30e5", "nyu");
			katakanaToHepburn.put("\u30cb\u30e7", "nyo");
			katakanaToHepburn.put("\u30cc", "nu");
			katakanaToHepburn.put("\u30cd", "ne");
			katakanaToHepburn.put("\u30ce", "no");
			katakanaToHepburn.put("\u30cf", "ha");
			katakanaToHepburn.put("\u30d0", "ba");
			katakanaToHepburn.put("\u30d1", "pa");
			katakanaToHepburn.put("\u30d2", "hi");
			katakanaToHepburn.put("\u30d2\u30e3", "hya");
			katakanaToHepburn.put("\u30d2\u30e5", "hyu");
			katakanaToHepburn.put("\u30d2\u30e7", "hyo");
			katakanaToHepburn.put("\u30d3", "bi");
			katakanaToHepburn.put("\u30d3\u30e3", "bya");
			katakanaToHepburn.put("\u30d3\u30e5", "byu");
			katakanaToHepburn.put("\u30d3\u30e7", "byo");
			katakanaToHepburn.put("\u30d4", "pi");
			katakanaToHepburn.put("\u30d4\u30e3", "pya");
			katakanaToHepburn.put("\u30d4\u30e5", "pyu");
			katakanaToHepburn.put("\u30d4\u30e7", "pyo");
			katakanaToHepburn.put("\u30d5", "fu");
			katakanaToHepburn.put("\u30d5\u30a1", "fa");
			katakanaToHepburn.put("\u30d5\u30a3", "fi");
			katakanaToHepburn.put("\u30d5\u30a7", "fe");
			katakanaToHepburn.put("\u30d5\u30a9", "fo");
			katakanaToHepburn.put("\u30d6", "bu");
			katakanaToHepburn.put("\u30d7", "pu");
			katakanaToHepburn.put("\u30d8", "he");
			katakanaToHepburn.put("\u30d9", "be");
			katakanaToHepburn.put("\u30da", "pe");
			katakanaToHepburn.put("\u30db", "ho");
			katakanaToHepburn.put("\u30dc", "bo");
			katakanaToHepburn.put("\u30dd", "po");
			katakanaToHepburn.put("\u30de", "ma");
			katakanaToHepburn.put("\u30df", "mi");
			katakanaToHepburn.put("\u30df\u30e3", "mya");
			katakanaToHepburn.put("\u30df\u30e5", "myu");
			katakanaToHepburn.put("\u30df\u30e7", "myo");
			katakanaToHepburn.put("\u30e0", "mu");
			katakanaToHepburn.put("\u30e1", "me");
			katakanaToHepburn.put("\u30e2", "mo");
			katakanaToHepburn.put("\u30e3", "ya");
			katakanaToHepburn.put("\u30e4", "ya");
			katakanaToHepburn.put("\u30e5", "yu");
			katakanaToHepburn.put("\u30e6", "yu");
			katakanaToHepburn.put("\u30e7", "yo");
			katakanaToHepburn.put("\u30e8", "yo");
			katakanaToHepburn.put("\u30e9", "ra");
			katakanaToHepburn.put("\u30ea", "ri");
			katakanaToHepburn.put("\u30ea\u30e3", "rya");
			katakanaToHepburn.put("\u30ea\u30e5", "ryu");
			katakanaToHepburn.put("\u30ea\u30e7", "ryo");
			katakanaToHepburn.put("\u30eb", "ru");
			katakanaToHepburn.put("\u30ec", "re");
			katakanaToHepburn.put("\u30ed", "ro");
			katakanaToHepburn.put("\u30ee", "wa");
			katakanaToHepburn.put("\u30ef", "wa");
			katakanaToHepburn.put("\u30f0", "i");
			katakanaToHepburn.put("\u30f1", "e");
			katakanaToHepburn.put("\u30f2", "wo");
			katakanaToHepburn.put("\u30f3", "n");
			katakanaToHepburn.put("\u30f3\u30a2", "n'a");
			katakanaToHepburn.put("\u30f3\u30a4", "n'i");
			katakanaToHepburn.put("\u30f3\u30a6", "n'u");
			katakanaToHepburn.put("\u30f3\u30a8", "n'e");
			katakanaToHepburn.put("\u30f3\u30aa", "n'o");
			katakanaToHepburn.put("\u30f4", "vu");
			katakanaToHepburn.put("\u30f4\u30a1", "va");
			katakanaToHepburn.put("\u30f4\u30a3", "vi");
			katakanaToHepburn.put("\u30f4\u30a7", "ve");
			katakanaToHepburn.put("\u30f4\u30a9", "vo");
			katakanaToHepburn.put("\u30f5", "ka");
			katakanaToHepburn.put("\u30f6", "ke");
			katakanaToHepburn.put("\u30fc", "^");
		}
		return katakanaToHepburn;
	}

	private static Map<String, String> getKatakanaToKunreiMap() {
		if (katakanaToKunrei == null) {
			katakanaToKunrei = new TreeMap<String, String>();
			katakanaToKunrei.put("\u30a1", "a");
			katakanaToKunrei.put("\u30a2", "a");
			katakanaToKunrei.put("\u30a3", "i");
			katakanaToKunrei.put("\u30a4", "i");
			katakanaToKunrei.put("\u30a5", "u");
			katakanaToKunrei.put("\u30a6", "u");
			katakanaToKunrei.put("\u30a7", "e");
			katakanaToKunrei.put("\u30a8", "e");
			katakanaToKunrei.put("\u30a9", "o");
			katakanaToKunrei.put("\u30aa", "o");
			katakanaToKunrei.put("\u30ab", "ka");
			katakanaToKunrei.put("\u30ac", "ga");
			katakanaToKunrei.put("\u30ad", "ki");
			katakanaToKunrei.put("\u30ad\u30e3", "kya");
			katakanaToKunrei.put("\u30ad\u30e5", "kyu");
			katakanaToKunrei.put("\u30ad\u30e7", "kyo");
			katakanaToKunrei.put("\u30ae", "gi");
			katakanaToKunrei.put("\u30ae\u30e3", "gya");
			katakanaToKunrei.put("\u30ae\u30e5", "gyu");
			katakanaToKunrei.put("\u30ae\u30e7", "gyo");
			katakanaToKunrei.put("\u30af", "ku");
			katakanaToKunrei.put("\u30b0", "gu");
			katakanaToKunrei.put("\u30b1", "ke");
			katakanaToKunrei.put("\u30b2", "ge");
			katakanaToKunrei.put("\u30b3", "ko");
			katakanaToKunrei.put("\u30b4", "go");
			katakanaToKunrei.put("\u30b5", "sa");
			katakanaToKunrei.put("\u30b6", "za");
			katakanaToKunrei.put("\u30b7", "si");
			katakanaToKunrei.put("\u30b7\u30e3", "sya");
			katakanaToKunrei.put("\u30b7\u30e5", "syu");
			katakanaToKunrei.put("\u30b7\u30e7", "syo");
			katakanaToKunrei.put("\u30b8", "zi");
			katakanaToKunrei.put("\u30b8\u30e3", "zya");
			katakanaToKunrei.put("\u30b8\u30e5", "zyu");
			katakanaToKunrei.put("\u30b8\u30e7", "zyo");
			katakanaToKunrei.put("\u30b9", "su");
			katakanaToKunrei.put("\u30ba", "zu");
			katakanaToKunrei.put("\u30bb", "se");
			katakanaToKunrei.put("\u30bc", "ze");
			katakanaToKunrei.put("\u30bd", "so");
			katakanaToKunrei.put("\u30be", "zo");
			katakanaToKunrei.put("\u30bf", "ta");
			katakanaToKunrei.put("\u30c0", "da");
			katakanaToKunrei.put("\u30c1", "ti");
			katakanaToKunrei.put("\u30c1\u30e3", "tya");
			katakanaToKunrei.put("\u30c1\u30e5", "tyu");
			katakanaToKunrei.put("\u30c1\u30e7", "tyo");
			katakanaToKunrei.put("\u30c2", "di");
			katakanaToKunrei.put("\u30c2\u30e3", "dya");
			katakanaToKunrei.put("\u30c2\u30e5", "dyu");
			katakanaToKunrei.put("\u30c2\u30e7", "dyo");
			katakanaToKunrei.put("\u30c3", "tu");
			katakanaToKunrei.put("\u30c3\u30ab", "kka");
			katakanaToKunrei.put("\u30c3\u30ac", "gga");
			katakanaToKunrei.put("\u30c3\u30ad", "kki");
			katakanaToKunrei.put("\u30c3\u30ad\u30e3", "kkya");
			katakanaToKunrei.put("\u30c3\u30ad\u30e5", "kkyu");
			katakanaToKunrei.put("\u30c3\u30ad\u30e7", "kkyo");
			katakanaToKunrei.put("\u30c3\u30ae", "ggi");
			katakanaToKunrei.put("\u30c3\u30ae\u30e3", "ggya");
			katakanaToKunrei.put("\u30c3\u30ae\u30e5", "ggyu");
			katakanaToKunrei.put("\u30c3\u30ae\u30e7", "ggyo");
			katakanaToKunrei.put("\u30c3\u30af", "kku");
			katakanaToKunrei.put("\u30c3\u30b0", "ggu");
			katakanaToKunrei.put("\u30c3\u30b1", "kke");
			katakanaToKunrei.put("\u30c3\u30b2", "gge");
			katakanaToKunrei.put("\u30c3\u30b3", "kko");
			katakanaToKunrei.put("\u30c3\u30b4", "ggo");
			katakanaToKunrei.put("\u30c3\u30b5", "ssa");
			katakanaToKunrei.put("\u30c3\u30b6", "zza");
			katakanaToKunrei.put("\u30c3\u30b7", "ssi");
			katakanaToKunrei.put("\u30c3\u30b7\u30e3", "ssya");
			katakanaToKunrei.put("\u30c3\u30b7\u30e5", "ssyu");
			katakanaToKunrei.put("\u30c3\u30b7\u30e7", "ssho");
			katakanaToKunrei.put("\u30c3\u30b8", "zzi");
			katakanaToKunrei.put("\u30c3\u30b8\u30e3", "zzya");
			katakanaToKunrei.put("\u30c3\u30b8\u30e5", "zzyu");
			katakanaToKunrei.put("\u30c3\u30b8\u30e7", "zzyo");
			katakanaToKunrei.put("\u30c3\u30b9", "ssu");
			katakanaToKunrei.put("\u30c3\u30ba", "zzu");
			katakanaToKunrei.put("\u30c3\u30bb", "sse");
			katakanaToKunrei.put("\u30c3\u30bc", "zze");
			katakanaToKunrei.put("\u30c3\u30bd", "sso");
			katakanaToKunrei.put("\u30c3\u30be", "zzo");
			katakanaToKunrei.put("\u30c3\u30bf", "tta");
			katakanaToKunrei.put("\u30c3\u30c0", "dda");
			katakanaToKunrei.put("\u30c3\u30c1", "tti");
			katakanaToKunrei.put("\u30c3\u30c1\u30e3", "ttya");
			katakanaToKunrei.put("\u30c3\u30c1\u30e5", "ttyu");
			katakanaToKunrei.put("\u30c3\u30c1\u30e7", "ttyo");
			katakanaToKunrei.put("\u30c3\u30c2", "ddi");
			katakanaToKunrei.put("\u30c3\u30c2\u30e3", "ddya");
			katakanaToKunrei.put("\u30c3\u30c2\u30e5", "ddyu");
			katakanaToKunrei.put("\u30c3\u30c2\u30e7", "ddyo");
			katakanaToKunrei.put("\u30c3\u30c4", "ttu");
			katakanaToKunrei.put("\u30c3\u30c5", "ddu");
			katakanaToKunrei.put("\u30c3\u30c6", "tte");
			katakanaToKunrei.put("\u30c3\u30c7", "dde");
			katakanaToKunrei.put("\u30c3\u30c8", "tto");
			katakanaToKunrei.put("\u30c3\u30c9", "ddo");
			katakanaToKunrei.put("\u30c3\u30cf", "hha");
			katakanaToKunrei.put("\u30c3\u30d0", "bba");
			katakanaToKunrei.put("\u30c3\u30d1", "ppa");
			katakanaToKunrei.put("\u30c3\u30d2", "hhi");
			katakanaToKunrei.put("\u30c3\u30d2\u30e3", "hhya");
			katakanaToKunrei.put("\u30c3\u30d2\u30e5", "hhyu");
			katakanaToKunrei.put("\u30c3\u30d2\u30e7", "hhyo");
			katakanaToKunrei.put("\u30c3\u30d3", "bbi");
			katakanaToKunrei.put("\u30c3\u30d3\u30e3", "bbya");
			katakanaToKunrei.put("\u30c3\u30d3\u30e5", "bbyu");
			katakanaToKunrei.put("\u30c3\u30d3\u30e7", "bbyo");
			katakanaToKunrei.put("\u30c3\u30d4", "ppi");
			katakanaToKunrei.put("\u30c3\u30d4\u30e3", "ppya");
			katakanaToKunrei.put("\u30c3\u30d4\u30e5", "ppyu");
			katakanaToKunrei.put("\u30c3\u30d4\u30e7", "ppyo");
			katakanaToKunrei.put("\u30c3\u30d5", "hhu");
			katakanaToKunrei.put("\u30c3\u30d5\u30a1", "ffa");
			katakanaToKunrei.put("\u30c3\u30d5\u30a3", "ffi");
			katakanaToKunrei.put("\u30c3\u30d5\u30a7", "ffe");
			katakanaToKunrei.put("\u30c3\u30d5\u30a9", "ffo");
			katakanaToKunrei.put("\u30c3\u30d6", "bbu");
			katakanaToKunrei.put("\u30c3\u30d7", "ppu");
			katakanaToKunrei.put("\u30c3\u30d8", "hhe");
			katakanaToKunrei.put("\u30c3\u30d9", "bbe");
			katakanaToKunrei.put("\u30c3\u30da", "ppe");
			katakanaToKunrei.put("\u30c3\u30db", "hho");
			katakanaToKunrei.put("\u30c3\u30dc", "bbo");
			katakanaToKunrei.put("\u30c3\u30dd", "ppo");
			katakanaToKunrei.put("\u30c3\u30e4", "yya");
			katakanaToKunrei.put("\u30c3\u30e6", "yyu");
			katakanaToKunrei.put("\u30c3\u30e8", "yyo");
			katakanaToKunrei.put("\u30c3\u30e9", "rra");
			katakanaToKunrei.put("\u30c3\u30ea", "rri");
			katakanaToKunrei.put("\u30c3\u30ea\u30e3", "rrya");
			katakanaToKunrei.put("\u30c3\u30ea\u30e5", "rryu");
			katakanaToKunrei.put("\u30c3\u30ea\u30e7", "rryo");
			katakanaToKunrei.put("\u30c3\u30eb", "rru");
			katakanaToKunrei.put("\u30c3\u30ec", "rre");
			katakanaToKunrei.put("\u30c3\u30ed", "rro");
			katakanaToKunrei.put("\u30c3\u30f4", "vvu");
			katakanaToKunrei.put("\u30c3\u30f4\u30a1", "vva");
			katakanaToKunrei.put("\u30c3\u30f4\u30a3", "vvi");
			katakanaToKunrei.put("\u30c3\u30f4\u30a7", "vve");
			katakanaToKunrei.put("\u30c3\u30f4\u30a9", "vvo");
			katakanaToKunrei.put("\u30c4", "tu");
			katakanaToKunrei.put("\u30c5", "du");
			katakanaToKunrei.put("\u30c6", "te");
			katakanaToKunrei.put("\u30c7", "de");
			katakanaToKunrei.put("\u30c8", "to");
			katakanaToKunrei.put("\u30c9", "do");
			katakanaToKunrei.put("\u30ca", "na");
			katakanaToKunrei.put("\u30cb", "ni");
			katakanaToKunrei.put("\u30cb\u30e3", "nya");
			katakanaToKunrei.put("\u30cb\u30e5", "nyu");
			katakanaToKunrei.put("\u30cb\u30e7", "nyo");
			katakanaToKunrei.put("\u30cc", "nu");
			katakanaToKunrei.put("\u30cd", "ne");
			katakanaToKunrei.put("\u30ce", "no");
			katakanaToKunrei.put("\u30cf", "ha");
			katakanaToKunrei.put("\u30d0", "ba");
			katakanaToKunrei.put("\u30d1", "pa");
			katakanaToKunrei.put("\u30d2", "hi");
			katakanaToKunrei.put("\u30d2\u30e3", "hya");
			katakanaToKunrei.put("\u30d2\u30e5", "hyu");
			katakanaToKunrei.put("\u30d2\u30e7", "hyo");
			katakanaToKunrei.put("\u30d3", "bi");
			katakanaToKunrei.put("\u30d3\u30e3", "bya");
			katakanaToKunrei.put("\u30d3\u30e5", "byu");
			katakanaToKunrei.put("\u30d3\u30e7", "byo");
			katakanaToKunrei.put("\u30d4", "pi");
			katakanaToKunrei.put("\u30d4\u30e3", "pya");
			katakanaToKunrei.put("\u30d4\u30e5", "pyu");
			katakanaToKunrei.put("\u30d4\u30e7", "pyo");
			katakanaToKunrei.put("\u30d5", "hu");
			katakanaToKunrei.put("\u30d5\u30a1", "fa");
			katakanaToKunrei.put("\u30d5\u30a3", "fi");
			katakanaToKunrei.put("\u30d5\u30a7", "fe");
			katakanaToKunrei.put("\u30d5\u30a9", "fo");
			katakanaToKunrei.put("\u30d6", "bu");
			katakanaToKunrei.put("\u30d7", "pu");
			katakanaToKunrei.put("\u30d8", "he");
			katakanaToKunrei.put("\u30d9", "be");
			katakanaToKunrei.put("\u30da", "pe");
			katakanaToKunrei.put("\u30db", "ho");
			katakanaToKunrei.put("\u30dc", "bo");
			katakanaToKunrei.put("\u30dd", "po");
			katakanaToKunrei.put("\u30de", "ma");
			katakanaToKunrei.put("\u30df", "mi");
			katakanaToKunrei.put("\u30df\u30e3", "mya");
			katakanaToKunrei.put("\u30df\u30e5", "myu");
			katakanaToKunrei.put("\u30df\u30e7", "myo");
			katakanaToKunrei.put("\u30e0", "mu");
			katakanaToKunrei.put("\u30e1", "me");
			katakanaToKunrei.put("\u30e2", "mo");
			katakanaToKunrei.put("\u30e3", "ya");
			katakanaToKunrei.put("\u30e4", "ya");
			katakanaToKunrei.put("\u30e5", "yu");
			katakanaToKunrei.put("\u30e6", "yu");
			katakanaToKunrei.put("\u30e7", "yo");
			katakanaToKunrei.put("\u30e8", "yo");
			katakanaToKunrei.put("\u30e9", "ra");
			katakanaToKunrei.put("\u30ea", "ri");
			katakanaToKunrei.put("\u30ea\u30e3", "rya");
			katakanaToKunrei.put("\u30ea\u30e5", "ryu");
			katakanaToKunrei.put("\u30ea\u30e7", "ryo");
			katakanaToKunrei.put("\u30eb", "ru");
			katakanaToKunrei.put("\u30ec", "re");
			katakanaToKunrei.put("\u30ed", "ro");
			katakanaToKunrei.put("\u30ee", "wa");
			katakanaToKunrei.put("\u30ef", "wa");
			katakanaToKunrei.put("\u30f0", "i");
			katakanaToKunrei.put("\u30f1", "e");
			katakanaToKunrei.put("\u30f2", "wo");
			katakanaToKunrei.put("\u30f3", "n");
			katakanaToKunrei.put("\u30f3\u30a2", "n'a");
			katakanaToKunrei.put("\u30f3\u30a4", "n'i");
			katakanaToKunrei.put("\u30f3\u30a6", "n'u");
			katakanaToKunrei.put("\u30f3\u30a8", "n'e");
			katakanaToKunrei.put("\u30f3\u30aa", "n'o");
			katakanaToKunrei.put("\u30f4", "vu");
			katakanaToKunrei.put("\u30f4\u30a1", "va");
			katakanaToKunrei.put("\u30f4\u30a3", "vi");
			katakanaToKunrei.put("\u30f4\u30a7", "ve");
			katakanaToKunrei.put("\u30f4\u30a9", "vo");
			katakanaToKunrei.put("\u30f5", "ka");
			katakanaToKunrei.put("\u30f6", "ke");
			katakanaToKunrei.put("\u30fc", "^");
		}
		return katakanaToKunrei;
	}

	private static Map<String, String> getKanaToHepburnMap() {
		if (kanaToHepburn == null) {
			kanaToHepburn = new TreeMap<String, String>();
			kanaToHepburn.putAll(getHiraganaToHepburnMap());
			kanaToHepburn.putAll(getKatakanaToHepburnMap());
		}
		return kanaToHepburn;
	}

	public String convertKanaSimple(String input) {
		return convertKana(input).replaceAll("\\^|'", "");
	}

	public String convertKana(String input) {
		return convertKana(input, getKanaToHepburnMap());
	}

	private String convertKana(String input, Map<String, String> map) {
		if (input == null) {
			return null;
		}
		if (input.equals("")) {
			return "";
		}

		StringBuilder builder = new StringBuilder();
		for (int i = 0; i < input.length();) {
			for (int length = MAX_LENGTH; length > 0; length--) {
				String substring = StringUtils.substring(input, i, i + length);
				if (map.containsKey(substring)) {
					builder.append(map.get(substring));
					i = i + substring.length();
					break;
				} else if (length == 1) {
					builder.append(input.charAt(i));
					i++;
				}
			}
		}
		return builder.toString();
	}

}
